@inherits LayoutComponentBase
@using BlazorBootstrap
@using Blazored.LocalStorage
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]
@inject Infractruture.Services.ToastService ToastService
@inject ILocalStorageService LocalStorageService
@inject NavigationManager NavigationManager
@using Infractruture.Interfaces;
@using SharedApp.Helpers;

@*
/// <summary>
/// Pagina que se utiliza para poder formar el layout del sistema, es la plantilla general donde se cargaran todas las paginas
/// </summary>

*@
<Toasts class="p-3"
        Messages="ToastService.Messages"
        AutoHide="true"
        Delay="3000"
        Placement="ToastsPlacement.TopRight"
        CreateToastMessageCallback="CreateToastMessage" />

<div class="container-center-horizontal">
    @* <div class=@ClasePage> *@
    <div class="pantalla-inicio screen">
        <div class="menu-adminitrador-can">
            <div class="menu">
                <div class="menu-1 menu-4">
                    <div class="user_button" style="flex-direction: column;">
                        <img class="avatar" src="admin/img/avatar.svg" alt="avatar">
                        <div class="frame-78">
                            <div class="frame-10000023">
                                <div class="alberto-mendez headingheadline5-h5">@nombre @apellidos</div>
                                <div class="frame-10000023">
                                    <div class="frame-1000002371">
                                        <div class="albertonovacerocom bodybody-small">@nombreRol</div>
                                    </div>
                                </div>
                            </div>
                            <img class="expand_more" src="admin/img/expand-more@2x.png" alt="expand_more">
                        </div>
                    </div>
                    <div class="men">
                        <div class="men-1">
                            <div class="inicio-1">
                                <a href="/administracion" class="inicio-2" style="cursor: pointer; text-decoration: none; color: inherit;">
                                    <img class="material-symbols-lig" src="admin/img/material-symbols-light-home-outline-rounded.svg" alt="material-symbols-light:home-outline-rounded">
                                    <div class="inicio-3 valign-text-middle headingheadline5-h5">Inicio</div>
                                </a>

                                <div class="perfiles">
                                    <div class="titulo"><div class="inicio valign-text-middle bodysmall-600">Perfiles</div></div>
                                    @if (navItems?.Any() == true)
                                    {
                                        @foreach (var item in navItems)
                                        {
                                            if (item.CodigoHomologacion == "KEY_MENU_ONA" ||
                                            item.CodigoHomologacion == "KEY_MENU_USU" ||
                                            item.CodigoHomologacion == "KEY_MENU_REP_EST")
                                            {
                                                <div class="campos">
                                                    <img class="bibuilding" src="@item.Icono" alt="Icono" />
                                                    <NavLink href="@item.NavItem.Href" class="place valign-text-middle headingheadline5-h5">@item.NavItem.Text</NavLink>
                                                </div>
                                            }
                                        }
                                    }
                                    else
                                    {
                                        <p class="label valign-text-middle inter-regular-normal-comet-14px">Cargando menú...</p>
                                    }
                                </div>
                            </div>
                            <div class="homologacin">
                                <div class="titulo"><div class="inicio valign-text-middle bodysmall-600">Homologación</div></div>
                                <div class="menu-2 menu-4">
                                    @if (navItems?.Any() == true)
                                    {
                                        @foreach (var item in navItems)
                                        {
                                            if (item.CodigoHomologacion != "KEY_MENU_ONA" && item.CodigoHomologacion != "KEY_MENU_USU" && item.CodigoHomologacion != "KEY_MENU_REP_EST")
                                            {
                                                <div class="campos">
                                                    <img class="bibuilding" src="@item.Icono" alt="Icono" />
                                                    <NavLink href="@item.NavItem.Href" class="place valign-text-middle headingheadline5-h5">
                                                        @item.NavItem.Text
                                                    </NavLink>
                                                </div>
                                            }   
                                        }
                                    }
                                    else
                                    {
                                        <p class="label valign-text-middle inter-regular-normal-comet-14px">Cargando menú...</p>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ayuda">
                    <div class="menu-3 menu-4">
                        <img class="help" src="admin/img/help.svg" alt="help">
                        <NavLink class="nav-link ayuda-1 valign-text-middle headingheadline5-h5" href="salir">
                            <span class="p-2">
                                Salir
                            </span>
                        </NavLink>
                        @* <div class="ayuda-1 valign-text-middle headingheadline5-h5">

                        </div> *@
                    </div>
                </div>
            </div>
        </div>

        @inject NavigationManager NavigationManager

        @if (NavigationManager.Uri.Contains("/administracion"))
        {
            <div class="banner">
                <div class="top">
                    <img class="logo" src="admin/img/logo.svg" alt="logo">
                    <img class="vector-1" src="admin/img/vector-1.png" alt="vector 1">
                </div>
            </div>

        }
        else
        {

            <div class="general flex-col">
                <div class="general top">
                    <div class="general overlap-group">
                        <img class="general vector-1" src="admin/img/vector-1-1.png" alt="vector 1">
                        <img class="general frame" src="admin/img/frame-1.svg" alt="Frame">
                    </div>
                </div>
                
                  @if (NavigationManager.Uri.Contains("/reportecan") ||
                  NavigationManager.Uri.Contains("/reporteona") ||
                  NavigationManager.Uri.Contains("/reporteread") ||
                  NavigationManager.Uri.Contains("/reporte1"))
                {
                    <link href="css/admin-report.css" rel="stylesheet">

                    <div class="">
                        @Body
                    </div>
                }
                else
                {
                    <link href="css/admin.css" rel="stylesheet">
                    <link href="css/pagination.css" rel="stylesheet">
                    <link href="css/modal-footer.css" rel="stylesheet">
                    <link href="css/btn-export.css" rel="stylesheet">
                    <link href="css/activo-inactivo.css" rel="stylesheet">
                    <link href="css/table-header.css" rel="stylesheet">
                    <link href="css/table-body.css" rel="stylesheet">
                    <link href="css/input-file.css" rel="stylesheet">
                    <link href="css/custom-dropdown.css" rel="stylesheet">
                    <div class="general main-container">
                        @Body
                    </div>
                }
            </div>
        }
    </div>
</div>

