@using ClientApp.Models
@using SharedApp.Models.Dtos
@using Newtonsoft.Json
@using BlazorBootstrap

<div class="index-card">
    <div class="row">
        <!-- Columna del mapa (20%) -->
        @*     <div class="col-md-2">
        <div id="map" style="width: 100%; height: 100%; background-color: grey;">
        <!-- Aquí se carga el mapa de Google -->
        </div>
        </div> *@
        <div class="col-md-4">
            <iframe id="map"
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d99769.21423248247!2d-78.57956327686247!3d-0.22016469512648144!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x91d59a1d0627cf35%3A0xe9f898434b2a8ad7!2sQuito%2C%20Ecuador!5e0!3m2!1sen!2sus!4v1692724900163!5m2!1sen!2sus"
                    width="100%"
                    height="100%"
                    style="border:0;"
                    allowfullscreen=""
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade">
            </iframe>
        </div>
        <!-- Columna de tarjetas (80%) -->
        <div class="col-md-8">
            <div class="row">
                @if (ListaEtiquetasGrilla != null && ResultadoData != null)
                {
                    @foreach (var item in ResultadoData)
                    {
                        <div class="col-md-6 mb-4">
                            <div class="card shadow">
                                <div class="card-header text-center font-weight-bold">
                                    <!-- Encabezado dinámico basado en la primera etiqueta -->
                                    @ListaEtiquetasGrilla.FirstOrDefault()?.MostrarWeb
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        @foreach (var etiqueta in ListaEtiquetasGrilla.OrderBy(c => c.MostrarWebOrden))
                                        {
                                            <div class="col-6">
                                                <h6>@etiqueta.MostrarWeb</h6>
                                                <p>@ObtenerDato(item, etiqueta.IdHomologacion)</p>
                                            </div>
                                        }
                                    </div>
                                </div>
                                <div class="card-footer text-center">
                                    <button class="btn btn-primary btn-sm" @onclick="() => MostrarDetalle(item)">
                                        Ver Detalle
                                    </button>
                                    <button class="btn btn-secondary btn-sm" @onclick="() => AbrirPdf(item)">
                                        Ver PDF
                                    </button>
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <div class="col-12 text-center">
                        <p>No se encontraron resultados.</p>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

